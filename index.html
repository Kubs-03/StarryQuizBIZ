<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ</title>
    <style>
        .quiz {
            width: 50%; /* change this accordingly*/
            /* background-color: rgb(236, 233, 213); */
            text-align: center;
            padding: 20px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            border-radius: 5px;
            margin: 0 auto;
            /* margin-top: 20px; */
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }

        .quiz .btn-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .quiz .next-btn {
            margin-top: 20px;
        }

        .quiz h2 {
            font-size: 25px;
            color: #000000;
            font-weight: 600;
        }

        .btn {
            background: #fff;
            color: #222;
            font-weight: 500;
            width: 50%;
            border: 1px solid #222;
            padding: 10px;
            margin: 10px 0;
            text-align: left;
            border-radius: 15px;
            font-size: large;
            cursor: pointer;
            text-align: center;
        }

        .btn:hover {
            background: #222;
            color: #fff;
            transition: all 0.3s;
        }

        #next-btn,
        #start-btn {
            background: #000000;
            color: #fff;
            font-weight: 500;
            width: 150px;
            border: 0;
            padding: 10px;
            margin: 20px auto 0;
            border-radius: 4px;
            cursor: pointer;
            display: none;
            border: 1px black solid;
        }

        #next-btn:hover,
        #start-btn:hover {
            color: rgb(255, 255, 255);
            background-color: #333;
            transition: 0.2s all;
        }

        .correct {
            background: #9aeabc;
        }

        .incorrect {
            background: #ff9393;
        }

        #timer-toggle {
            display: flex;
            gap: 20px;
            /* justify-content: space-evenly; */
            /* background-color: #9aeabc; */
            text-align: center;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .timer-on {
            position: relative;
            display: inline-block;
            width: 49px;
            height: 21px;
        }

        /* Hide default HTML checkbox */
        .timer-on input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* The slider */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 2px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked+.slider {
            background-color: #000000;
        }

        input:focus+.slider {
            box-shadow: 0 0 1px #4a4949;
        }

        input:checked+.slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }


        /*for mobile screen*/
        @media only screen and (max-width: 600px) {

            .quiz {

                width: 80%;
                margin: 0 auto;
            }

            .quiz h2 {
                font-size: 20px;
            }

            .btn {
                width: 100%;
            }

            .btn-container {
                font-size: 16px;
            }

            #question-image{
                width: 100%;
                height: auto;
                border-radius:white 2px solid;
                
            }


        }

        /* Tablets (portrait and landscape) */
        @media only screen and (min-width: 601px) and (max-width: 900px) {
            .quiz {
                width: 80%;
            }

            .quiz h2 {
                font-size: 22px;
            }

            .btn {
                width: 75%;
            }
        }

        #question-image {
            width: 100%;
            /* height: auto; */
            display: none;
            margin: 0 auto;
            border-radius: 10px;
            /* border: black 2px solid; */
        }

        #timer {
            padding: 5px;
            margin: 5px;
        }

        #time {
            font-weight: bold;
            font-size: 20px;
            padding: 2px;
        }
    </style>
</head>

<body>
    <div class="quiz">
        <div id="Quiztitle">
            <h1>QUIZ</h1>
        </div>
        <div id="timer">Time left: <span id="time">15</span> seconds</div>

        <div id="totalques">no of questions---</div>
        <div id="timer-toggle">
            <h3>Timer</h3>
            <label class="timer-on">
                <input type="checkbox" id="timer-on" checked>
                <span class="slider round"></span>
            </label>
        </div>
        <img id="question-image" src="" alt="Question Image">
        <h2 id="question">Question goes here</h2>
        <div id="answer-buttons" class="btn-container"></div>
        <button id="next-btn" class="next-btn">Next</button>
        <button id="start-btn" class="start-btn">Start Quiz</button>
        <div id="result" class="result"></div>

    </div>
</body>
<script>
    const questions = [
        {
            question: "Which layer of the Earth's atmosphere is closest to the Earth's surface?",
            image: "https://lp-cms-production.imgix.net/news/2019/06/taj-mahal.jpg?auto=format&fit=crop&q=40&sharp=10&vib=20&ixlib=react-8.6.4",
            answers: [
                { text: "Stratosphere", correct: false },
                { text: "Mesosphere", correct: false },
                { text: "Troposphere", correct: true },
                { text: "Thermosphere", correct: false },
            ]
        },
        {
            question: "Which layer of the Earth's atmosphere is closest to the Earth's surface?",
            image: "https://www.robinage.com/wp-content/uploads/2022/04/jantar-mantar-487736282-800x533.jpg",
            answers: [
                { text: "Stratosphere", correct: false },
                { text: "Mesosphere", correct: false },
                { text: "Troposphere", correct: true },
                { text: "Thermosphere", correct: false },
            ]
        },
        {
            question: "Which layer of the Earth's atmosphere is closest to the Earth's surface?",
            image:"https://www.revv.co.in/blogs/wp-content/uploads/2020/04/places-to-visit-in-vizag.jpg" ,
            answers: [
                { text: "Stratosphere", correct: false },
                { text: "Mesosphere", correct: false },
                { text: "Troposphere", correct: true },
                { text: "Thermosphere", correct: false },
            ]
        }
    ];

    const questionElement = document.getElementById("question");
    const questionImage = document.getElementById("question-image");
    const answerButtons = document.getElementById("answer-buttons");
    const nextButton = document.getElementById("next-btn");
    const startButton = document.getElementById("start-btn");
    const timerElement = document.getElementById("time");
    const timerContainer = document.getElementById("timer");
    const timerToggle = document.getElementById("timer-on");
    const timerToggleContainer = document.getElementById("timer-toggle");

    let currentQuestionIndex = 0;
    let score = 0;
    let timeLeft = 15;
    let timer;

    timerContainer.style.display = "none";
    totalques.innerHTML = "Questions: " + questions.length;

    function startQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        // nextButton.innerHTML = "Next";
        startButton.style.display = "none";
        timerToggleContainer.style.display = "none";
        totalques.style.display = "none";
        Quiztitle.style.display = "none";
        showQuestion();
    }

    function showQuestion() {
        resetState();
        let currentQuestion = questions[currentQuestionIndex];
        let questionNO = currentQuestionIndex + 1;

        if (currentQuestion.image) {
            questionImage.src = currentQuestion.image;
            questionImage.style.display = "block";
        } else {
            questionImage.style.display = "none";
        }
        questionElement.innerHTML = questionNO + ". " + currentQuestion.question;
        questionElement.style.display = "block";

        currentQuestion.answers.forEach(answer => {
            const button = document.createElement("button");
            button.innerHTML = answer.text;
            button.classList.add("btn");
            answerButtons.appendChild(button);
            if (answer.correct) {
                button.dataset.correct = answer.correct;
            }
            button.addEventListener("click", selectAnswer);
        });

        if (timerToggle.checked) {
            startTimer();
        }
    }

    function resetState() {
        nextButton.style.display = "none";
        while (answerButtons.firstChild) {
            answerButtons.removeChild(answerButtons.firstChild);
        }
        clearInterval(timer);
        timeLeft = 15;
        timerElement.innerHTML = timeLeft;
        timerContainer.style.display = timerToggle.checked ? "block" : "none";
    }

    function selectAnswer(e) {
        const selectedBtn = e.target;
        const isCorrect = selectedBtn.dataset.correct === "true";
        if (isCorrect) {
            selectedBtn.classList.add("correct");
            score++; // Increment score for correct answers
        } else {
            selectedBtn.classList.add("incorrect");
        }
        Array.from(answerButtons.children).forEach(button => {
            if (button.dataset.correct === "true") {
                button.classList.add("correct");
            }
            button.disabled = true;
        });
        clearInterval(timer);
        setTimeout(handleNextButton, 1000); // Move to the next question after 1 second
    }


    function showScore() {
        resetState();
        let message = '';
        let totalQuestions = questions.length;
        let scorePercentage = (score / totalQuestions) * 100;

        if (score === totalQuestions) {
            message = `Congratulations! You got a perfect score of ${score}/${totalQuestions}!`;
        } else if (score >= 8) {
            message = `You are almost there! Your score is ${score}/${totalQuestions}.`;
        } else {
            message = `Please go through the concepts again. Your score is ${score}/${totalQuestions}.`;
        }

        questionElement.innerHTML = message;
        questionElement.style.display = "block";
        questionImage.style.display = "none";
        nextButton.innerHTML = "Play Again";
        nextButton.style.display = "block";
        timerContainer.style.display = "none"; // Hide the timer at the end of the quiz
        timerToggleContainer.style.display = "none"; // Show the timer toggle again

        nextButton.onclick = resetQuiz;
    }

    function handleNextButton() {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            showScore();
        }
    }

    function startTimer() {
        timer = setInterval(() => {
            timeLeft--;
            timerElement.innerHTML = timeLeft;
            if (timeLeft === 0) {
                clearInterval(timer);
                handleNextButton();
            }
        }, 1000);
    }

    function resetQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        questionElement.innerHTML = "Question goes here";
        questionImage.style.display = "none";
        questionImage.src = ""; // Clear the image source
        startButton.style.display = "block";
        timerToggleContainer.style.display = "block";
        timerContainer.style.display = "none";
        nextButton.style.display = "none";
        Quiztitle.style.display = "block";
        totalques.style.display = "block";
        // Reset styles for the "Start Quiz" button and timer toggle
        startButton.innerHTML = "Start Quiz";
        timerToggle.checked = true;
        timerElement.innerHTML = "15"; // Reset the timer display
    }



    startButton.addEventListener("click", startQuiz);

    // Show start button and timer toggle at the beginning
    startButton.style.display = "block";
    // timerToggleContainer.style.display = "block";

</script>

</html>
